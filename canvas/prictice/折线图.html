<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>折线图</title>
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>
</head>
<body>
<canvas></canvas>
<script>
    // 准备数据
    var data = [
        { x: 100, y: 100 },
        { x: 200, y: 120 },
        { x: 300, y: 180 },
        { x: 400, y: 300 },
        { x: 500, y: 140 }
    ]

    var canvas = document.querySelector("canvas");
    canvas.width = 600;
    canvas.height = 400;
    canvas.style.border = "1px solid #ff0000";

    var context = canvas.getContext('2d');
    // 3.设置坐标系的间距
    var space = 20;
    // 4.设置原点坐标
    var zeroX = space;
    var zeroY = canvas.height-space;
    // 5.箭头大小
    var arrow = 10;
    // 6.点大小
    var edge = 8;
//   X轴
    context.moveTo(zeroX,zeroY);
    context.lineTo(canvas.width-space,zeroY);
    context.lineTo(canvas.width-space-arrow,zeroY-arrow/2);
    context.lineTo(canvas.width-space-arrow,zeroY+arrow/2);
    context.lineTo(canvas.width-space,zeroY);
    context.fill();
    context.stroke();
    //   Y轴
    context.moveTo(zeroX,zeroY);
    context.lineTo(zeroX,space);
    context.lineTo(zeroX-arrow/2,space+arrow);
    context.lineTo(zeroX+arrow/2,space+arrow);
    context.lineTo(zeroX,space);
    context.fill();
    context.stroke();
//    转换数据
    var newData = [];
    data.forEach(function (item, i) {
        newData.push({
            x: this.zeroX + item.x,
            y: this.zeroY - item.y
        })
    })
//   画小方块
    for(var i=0;i<newData.length;i++){
        context.beginPath();
        context.moveTo(newData[i].x,newData[i].y);
        context.lineTo(newData[i].x-arrow/2,newData[i].y-arrow/2);
        context.lineTo(newData[i].x+arrow/2,newData[i].y-arrow/2);
        context.lineTo(newData[i].x+arrow/2,newData[i].y+arrow/2);
        context.lineTo(newData[i].x-arrow/2,newData[i].y+arrow/2);
        context.lineTo(newData[i].x-arrow/2,newData[i].y-arrow/2);
        context.fill();
        context.stroke();
    }
    for(var i=0;i<newData.length;i++){
        context.moveTo(zeroX,zeroY);
        context.lineTo(newData[i].x,newData[i].y);
        context.stroke();
        zeroX = newData[i].x;
        zeroY = newData[i].y;
    }

</script>
</body>
</html>